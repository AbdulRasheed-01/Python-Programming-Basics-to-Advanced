Week 4: Functions and Modules

ðŸ“‹ Learning Objectives
By the end of this week, you will be able to:

âœ… Create and use functions effectively

âœ… Understand function parameters and return values

âœ… Work with variable scope and lifetimes

âœ… Use lambda functions for simple operations

âœ… Create and import modules

âœ… Build and organize packages

âœ… Handle command-line arguments

âœ… Write recursive functions

âœ… Use decorators to enhance functions

ðŸ“š Theory Content
4.1 Why Functions?
Functions help you:

Reuse code - Write once, use many times

Organize code - Break complex problems into smaller pieces

Abstract details - Hide implementation complexity

Test easily - Test functions independently

Collaborate - Share functions with others

ðŸ”§ Practical Exercises
Exercise 1: Basic Functions

# basic_functions.py
"""
Introduction to creating and using functions
"""

print("="*60)
print("BASIC FUNCTIONS")
print("="*60)

# 1. Simple function with no parameters
def greet():
    """Simple greeting function"""
    print("Hello! Welcome to Python functions!")

print("\n1. Simple function:")
greet()
greet()  # Can call multiple times

# 2. Function with parameters
def greet_person(name):
    """Greet a specific person"""
    print(f"Hello, {name}! Nice to meet you!")

print("\n2. Function with parameters:")
greet_person("Alice")
greet_person("Bob")

# 3. Function with return value
def add(a, b):
    """Add two numbers and return result"""
    result = a + b
    return result

print("\n3. Function with return value:")
sum_result = add(5, 3)
print(f"5 + 3 = {sum_result}")

# 4. Multiple return values
def get_min_max(numbers):
    """Return both minimum and maximum"""
    return min(numbers), max(numbers)

print("\n4. Multiple return values:")
nums = [4, 2, 9, 1, 7, 5]
minimum, maximum = get_min_max(nums)
print(f"Numbers: {nums}")
print(f"Min: {minimum}, Max: {maximum}")

# 5. Function with docstring
def calculate_area(radius):
    """
    Calculate the area of a circle.
    
    Args:
        radius (float): The radius of the circle
        
    Returns:
        float: The area of the circle
    """
    import math
    return math.pi * radius ** 2

print("\n5. Function with docstring:")
area = calculate_area(5)
print(f"Area of circle with radius 5: {area:.2f}")
print(f"Docstring: {calculate_area.__doc__}")

# 6. Function as variable
def square(x):
    return x ** 2

def cube(x):
    return x ** 3

print("\n6. Functions as variables:")
operations = [square, cube]  # List of functions
for i in range(1, 4):
    print(f"\nNumber: {i}")
    for func in operations:
        result = func(i)
        print(f"  {func.__name__}: {result}")

# 7. Nested functions
def outer_function(text):
    """Function containing inner function"""
    def inner_function():
        print(f"Inner function says: {text}")
    
    print("Outer function calling inner...")
    inner_function()

print("\n7. Nested functions:")
outer_function("Hello from inside!")

# 8. Function with type hints (Python 3.5+)
def process_data(name: str, age: int, scores: list) -> dict:
    """
    Process user data with type hints.
    
    Args:
        name: Person's name
        age: Person's age
        scores: List of scores
        
    Returns:
        Dictionary with processed data
    """
    return {
        "name": name.upper(),
        "age": age,
        "average": sum(scores) / len(scores) if scores else 0,
        "status": "Adult" if age >= 18 else "Minor"
    }

print("\n8. Function with type hints:")
result = process_data("Alice", 25, [85, 90, 88, 92])
print(f"Result: {result}")

# 9. Practice: Temperature converter
def celsius_to_fahrenheit(celsius):
    """Convert Celsius to Fahrenheit"""
    return (celsius * 9/5) + 32

def fahrenheit_to_celsius(fahrenheit):
    """Convert Fahrenheit to Celsius"""
    return (fahrenheit - 32) * 5/9

print("\n9. Temperature converter:")
temps_c = [0, 25, 37, 100]
print("Celsius to Fahrenheit:")
for c in temps_c:
    f = celsius_to_fahrenheit(c)
    print(f"  {c}Â°C = {f:.1f}Â°F")

# 10. Practice: String utilities
def reverse_string(text):
    """Reverse a string"""
    return text[::-1]

def count_vowels(text):
    """Count vowels in a string"""
    vowels = "aeiouAEIOU"
    return sum(1 for char in text if char in vowels)

def is_palindrome(text):
    """Check if text is a palindrome"""
    cleaned = text.lower().replace(" ", "")
    return cleaned == cleaned[::-1]

print("\n10. String utilities:")
test_strings = ["hello", "racecar", "Python", "A man a plan a canal Panama"]
for s in test_strings:
    print(f"\n  '{s}':")
    print(f"    Reversed: {reverse_string(s)}")
    print(f"    Vowels: {count_vowels(s)}")
    print(f"    Palindrome: {is_palindrome(s)}")

Output:

============================================================
BASIC FUNCTIONS
============================================================

1. Simple function:
Hello! Welcome to Python functions!
Hello! Welcome to Python functions!

2. Function with parameters:
Hello, Alice! Nice to meet you!
Hello, Bob! Nice to meet you!

3. Function with return value:
5 + 3 = 8

4. Multiple return values:
Numbers: [4, 2, 9, 1, 7, 5]
Min: 1, Max: 9

5. Function with docstring:
Area of circle with radius 5: 78.54
Docstring: 
    Calculate the area of a circle.
    
    Args:
        radius (float): The radius of the circle
        
    Returns:
        float: The area of the circle
    

6. Functions as variables:

Number: 1
  square: 1
  cube: 1

Number: 2
  square: 4
  cube: 8

Number: 3
  square: 9
  cube: 27

7. Nested functions:
Outer function calling inner...
Inner function says: Hello from inside!

8. Function with type hints:
Result: {'name': 'ALICE', 'age': 25, 'average': 88.75, 'status': 'Adult'}

9. Temperature converter:
Celsius to Fahrenheit:
  0Â°C = 32.0Â°F
  25Â°C = 77.0Â°F
  37Â°C = 98.6Â°F
  100Â°C = 212.0Â°F

10. String utilities:

  'hello':
    Reversed: olleh
    Vowels: 2
    Palindrome: False

  'racecar':
    Reversed: racecar
    Vowels: 3
    Palindrome: True

  'Python':
    Reversed: nohtyP
    Vowels: 1
    Palindrome: False

  'A man a plan a canal Panama':
    Reversed: amanaP lanac a nalp a nam A
    Vowels: 10
    Palindrome: True
Exercise 2: Function Parameters Deep Dive

# function_parameters.py
"""
Comprehensive guide to different parameter types
"""

print("="*60)
print("FUNCTION PARAMETERS DEEP DIVE")
print("="*60)

# 1. Positional arguments (order matters)
def describe_person(name, age, city):
    """Describe a person using positional arguments"""
    return f"{name} is {age} years old and lives in {city}"

print("\n1. POSITIONAL ARGUMENTS:")
print(describe_person("Alice", 30, "New York"))
print(describe_person("Bob", 25, "Los Angeles"))  # Order matters!

# 2. Default parameters
def create_profile(name, age=18, city="Unknown", active=True):
    """Create user profile with default values"""
    return {
        "name": name,
        "age": age,
        "city": city,
        "active": active,
        "member_type": "Premium" if age >= 21 else "Standard"
    }

print("\n2. DEFAULT PARAMETERS:")
print("Using all defaults:", create_profile("Alice"))
print("Override age:", create_profile("Bob", age=25))
print("Override multiple:", create_profile("Charlie", city="Chicago", active=False))

# 3. Keyword arguments (named parameters)
def calculate_total(price, quantity, tax_rate=0.08, discount=0):
    """Calculate total with optional tax and discount"""
    subtotal = price * quantity
    discount_amount = subtotal * discount
    after_discount = subtotal - discount_amount
    tax = after_discount * tax_rate
    total = after_discount + tax
    return total

print("\n3. KEYWORD ARGUMENTS:")
print("Positional only:", calculate_total(10, 3))
print("Mixed:", calculate_total(10, 3, tax_rate=0.1))
print("All keyword:", calculate_total(price=10, quantity=3, discount=0.1, tax_rate=0.08))

# 4. Variable positional arguments (*args)
def sum_all(*numbers):
    """Sum any number of arguments"""
    print(f"  Received {len(numbers)} numbers: {numbers}")
    return sum(numbers)

def calculate_average(*grades):
    """Calculate average of any number of grades"""
    if not grades:
        return 0
    return sum(grades) / len(grades)

print("\n4. VARIABLE POSITIONAL ARGUMENTS (*args):")
print("Sum of 1,2,3:", sum_all(1, 2, 3))
print("Sum of 1,2,3,4,5:", sum_all(1, 2, 3, 4, 5))
print("Average of grades:", calculate_average(85, 90, 78, 92, 88))

# Unpacking lists into *args
numbers = [10, 20, 30]
print("Unpacking list:", sum_all(*numbers))

# 5. Variable keyword arguments (**kwargs)
def create_student(**info):
    """Create student with any number of attributes"""
    print("\n  Student Information:")
    for key, value in info.items():
        print(f"    {key}: {value}")
    return info

print("\n5. VARIABLE KEYWORD ARGUMENTS (**kwargs):")
student1 = create_student(name="Alice", age=20, major="CS", year=3)
student2 = create_student(name="Bob", age=22, major="Engineering", gpa=3.8, sports="Soccer")

# Unpacking dictionaries into **kwargs
student_data = {
    "name": "Charlie",
    "age": 21,
    "major": "Physics",
    "year": 4,
    "honors": True
}
student3 = create_student(**student_data)

# 6. Combining parameter types
def complex_function(pos1, pos2, /, pos_or_kwd=10, *, kwd1, kwd2=20):
    """
    Demonstrates all parameter types:
    - pos1, pos2: Positional-only (before /)
    - pos_or_kwd: Positional or keyword (between / and *)
    - kwd1, kwd2: Keyword-only (after *)
    """
    print(f"\n  pos1={pos1}, pos2={pos2}")
    print(f"  pos_or_kwd={pos_or_kwd}")
    print(f"  kwd1={kwd1}, kwd2={kwd2}")
    return pos1 + pos2 + pos_or_kwd + kwd1 + kwd2

print("\n6. COMBINING PARAMETER TYPES:")
# Positional-only must be positional
result = complex_function(1, 2, kwd1=5)
print(f"  Result: {result}")

# Positional-or-keyword can be either
result = complex_function(1, 2, 3, kwd1=5)
print(f"  Result: {result}")

# Keyword-only must be keyword
result = complex_function(1, 2, kwd1=5, kwd2=10)
print(f"  Result: {result}")

# 7. Practical example: Flexible configuration
def configure_robot(**settings):
    """Configure a robot with any settings"""
    default_settings = {
        "name": "Robot-1",
        "speed": 1.0,
        "color": "red",
        "sensors": ["camera", "lidar"],
        "battery": 100
    }
    
    # Update defaults with provided settings
    default_settings.update(settings)
    return default_settings

print("\n7. PRACTICAL EXAMPLE - Robot Configuration:")
robot1 = configure_robot()
print("Default robot:", robot1)

robot2 = configure_robot(name="R2D2", speed=2.5, color="blue")
print("Custom robot:", robot2)

robot3 = configure_robot(
    name="Wall-E",
    speed=0.5,
    color="yellow",
    sensors=["camera", "gripper", "compactor"],
    battery=85,
    special_feature="Trash compactor"
)
print("Advanced robot:", robot3)

# 8. Function with mixed args and kwargs
def process_data(*args, **kwargs):
    """Process data with both args and kwargs"""
    print(f"\n  Positional args ({len(args)}): {args}")
    print(f"  Keyword kwargs ({len(kwargs)}): {kwargs}")
    
    # Process based on operation type
    operation = kwargs.get('operation', 'sum')
    
    if operation == 'sum':
        return sum(args)
    elif operation == 'average':
        return sum(args) / len(args) if args else 0
    elif operation == 'multiply':
        result = 1
        for num in args:
            result *= num
        return result
    else:
        return f"Unknown operation: {operation}"

print("\n8. MIXED ARGS AND KWARGS:")
print("Sum:", process_data(1, 2, 3, 4, operation='sum'))
print("Average:", process_data(10, 20, 30, operation='average'))
print("Multiply:", process_data(2, 3, 4, 5, operation='multiply'))

# 9. Parameter validation
def set_temperature(temp, unit='C'):
    """Set temperature with validation"""
    # Type checking
    if not isinstance(temp, (int, float)):
        raise TypeError(f"Temperature must be number, got {type(temp)}")
    
    # Range validation
    if unit.upper() == 'C':
        if temp < -273.15:
            raise ValueError(f"Temperature below absolute zero: {temp}Â°C")
    elif unit.upper() == 'F':
        if temp < -459.67:
            raise ValueError(f"Temperature below absolute zero: {temp}Â°F")
    else:
        raise ValueError(f"Unknown unit: {unit}")
    
    return f"Temperature set to {temp}Â°{unit.upper()}"

print("\n9. PARAMETER VALIDATION:")
print(set_temperature(25))
print(set_temperature(98.6, 'F'))

try:
    print(set_temperature(-300, 'C'))
except ValueError as e:
    print(f"  Error: {e}")

# 10. Function overloading simulation (with default params)
def calculate_area_shape(shape, *dimensions):
    """Calculate area of different shapes using single function"""
    if shape == "circle":
        radius = dimensions[0]
        import math
        return math.pi * radius ** 2
    elif shape == "rectangle":
        length, width = dimensions
        return length * width
    elif shape == "triangle":
        base, height = dimensions
        return 0.5 * base * height
    elif shape == "square":
        side = dimensions[0]
        return side ** 2
    else:
        return f"Unknown shape: {shape}"

print("\n10. SIMULATED FUNCTION OVERLOADING:")
print(f"Circle area (r=5): {calculate_area_shape('circle', 5):.2f}")
print(f"Rectangle area (5x3): {calculate_area_shape('rectangle', 5, 3)}")
print(f"Triangle area (base=4, height=6): {calculate_area_shape('triangle', 4, 6)}")
print(f"Square area (side=4): {calculate_area_shape('square', 4)}")

Output:

============================================================
FUNCTION PARAMETERS DEEP DIVE
============================================================

1. POSITIONAL ARGUMENTS:
Alice is 30 years old and lives in New York
Bob is 25 years old and lives in Los Angeles

2. DEFAULT PARAMETERS:
Using all defaults: {'name': 'Alice', 'age': 18, 'city': 'Unknown', 'active': True, 'member_type': 'Standard'}
Override age: {'name': 'Bob', 'age': 25, 'city': 'Unknown', 'active': True, 'member_type': 'Premium'}
Override multiple: {'name': 'Charlie', 'age': 18, 'city': 'Chicago', 'active': False, 'member_type': 'Standard'}

3. KEYWORD ARGUMENTS:
Positional only: 32.4
Mixed: 33.0
All keyword: 29.7

4. VARIABLE POSITIONAL ARGUMENTS (*args):
  Received 3 numbers: (1, 2, 3)
Sum of 1,2,3: 6
  Received 5 numbers: (1, 2, 3, 4, 5)
Sum of 1,2,3,4,5: 15
Average of grades: 86.6
Unpacking list:   Received 3 numbers: (10, 20, 30)
60

5. VARIABLE KEYWORD ARGUMENTS (**kwargs):

  Student Information:
    name: Alice
    age: 20
    major: CS
    year: 3

  Student Information:
    name: Bob
    age: 22
    major: Engineering
    gpa: 3.8
    sports: Soccer

  Student Information:
    name: Charlie
    age: 21
    major: Physics
    year: 4
    honors: True

6. COMBINING PARAMETER TYPES:

  pos1=1, pos2=2
  pos_or_kwd=10
  kwd1=5, kwd2=20
  Result: 38

  pos1=1, pos2=2
  pos_or_kwd=3
  kwd1=5, kwd2=20
  Result: 31

  pos1=1, pos2=2
  pos_or_kwd=10
  kwd1=5, kwd2=10
  Result: 28

7. PRACTICAL EXAMPLE - Robot Configuration:
Default robot: {'name': 'Robot-1', 'speed': 1.0, 'color': 'red', 'sensors': ['camera', 'lidar'], 'battery': 100}
Custom robot: {'name': 'R2D2', 'speed': 2.5, 'color': 'blue', 'sensors': ['camera', 'lidar'], 'battery': 100}
Advanced robot: {'name': 'Wall-E', 'speed': 0.5, 'color': 'yellow', 'sensors': ['camera', 'gripper', 'compactor'], 'battery': 85, 'special_feature': 'Trash compactor'}

8. MIXED ARGS AND KWARGS:

  Positional args (4): (1, 2, 3, 4)
  Keyword kwargs (1): {'operation': 'sum'}
Sum: 10

  Positional args (3): (10, 20, 30)
  Keyword kwargs (1): {'operation': 'average'}
Average: 20.0

  Positional args (4): (2, 3, 4, 5)
  Keyword kwargs (1): {'operation': 'multiply'}
Multiply: 120

9. PARAMETER VALIDATION:
Temperature set to 25Â°C
Temperature set to 98.6Â°F
  Error: Temperature below absolute zero: -300Â°C

10. SIMULATED FUNCTION OVERLOADING:
Circle area (r=5): 78.54
Rectangle area (5x3): 15
Triangle area (base=4, height=6): 12.0
Square area (side=4): 16

Exercise 3: Lambda Functions
# lambda_functions.py
"""
Lambda (anonymous) functions in Python
"""

print("="*60)
print("LAMBDA FUNCTIONS")
print("="*60)

# 1. Basic lambda syntax
print("\n1. BASIC LAMBDA SYNTAX:")
# Regular function
def square(x):
    return x ** 2

# Lambda equivalent
square_lambda = lambda x: x ** 2

print(f"Regular function: {square(5)}")
print(f"Lambda function: {square_lambda(5)}")

# 2. Lambda with multiple parameters
add = lambda a, b: a + b
multiply = lambda a, b, c: a * b * c

print("\n2. LAMBDA WITH MULTIPLE PARAMETERS:")
print(f"Add: {add(10, 5)}")
print(f"Multiply: {multiply(2, 3, 4)}")

# 3. Lambda with conditionals
max_value = lambda a, b: a if a > b else b
is_even = lambda x: x % 2 == 0
grade = lambda score: 'A' if score >= 90 else 'B' if score >= 80 else 'C' if score >= 70 else 'D' if score >= 60 else 'F'

print("\n3. LAMBDA WITH CONDITIONALS:")
print(f"Max of 10 and 20: {max_value(10, 20)}")
print(f"Is 7 even? {is_even(7)}")
print(f"Grade for 85: {grade(85)}")
print(f"Grade for 92: {grade(92)}")

# 4. Lambda with map() - transform each element
numbers = [1, 2, 3, 4, 5]
squares = list(map(lambda x: x ** 2, numbers))
cubes = list(map(lambda x: x ** 3, numbers))

print("\n4. LAMBDA WITH MAP():")
print(f"Original: {numbers}")
print(f"Squares: {squares}")
print(f"Cubes: {cubes}")

# 5. Lambda with filter() - select elements
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
evens = list(filter(lambda x: x % 2 == 0, numbers))
odds = list(filter(lambda x: x % 2 == 1, numbers))
greater_than_5 = list(filter(lambda x: x > 5, numbers))

print("\n5. LAMBDA WITH FILTER():")
print(f"Original: {numbers}")
print(f"Evens: {evens}")
print(f"Odds: {odds}")
print(f">5: {greater_than_5}")

# 6. Lambda with reduce() - cumulative operation
from functools import reduce

numbers = [1, 2, 3, 4, 5]
sum_all = reduce(lambda a, b: a + b, numbers)
product_all = reduce(lambda a, b: a * b, numbers)
max_num = reduce(lambda a, b: a if a > b else b, numbers)

print("\n6. LAMBDA WITH REDUCE():")
print(f"Numbers: {numbers}")
print(f"Sum: {sum_all}")
print(f"Product: {product_all}")
print(f"Max: {max_num}")

# 7. Lambda with sorted() - custom sorting
students = [
    {"name": "Alice", "grade": 85, "age": 20},
    {"name": "Bob", "grade": 92, "age": 22},
    {"name": "Charlie", "grade": 78, "age": 19},
    {"name": "Diana", "grade": 95, "age": 21}
]

# Sort by different criteria
by_name = sorted(students, key=lambda s: s["name"])
by_grade = sorted(students, key=lambda s: s["grade"], reverse=True)
by_age = sorted(students, key=lambda s: s["age"])

print("\n7. LAMBDA WITH SORTED():")
print("Sorted by name:")
for s in by_name:
    print(f"  {s['name']}: {s['grade']} (age {s['age']})")

print("\nSorted by grade (highest first):")
for s in by_grade:
    print(f"  {s['name']}: {s['grade']}")

# 8. Lambda with max/min - custom comparison
words = ["python", "java", "c", "javascript", "rust"]
longest = max(words, key=lambda w: len(w))
shortest = min(words, key=lambda w: len(w))
most_vowels = max(words, key=lambda w: sum(1 for c in w if c in 'aeiou'))

print("\n8. LAMBDA WITH MAX/MIN:")
print(f"Words: {words}")
print(f"Longest: {longest}")
print(f"Shortest: {shortest}")
print(f"Most vowels: {most_vowels}")

# 9. Lambda with list comprehension vs map
numbers = [1, 2, 3, 4, 5]

# Using list comprehension
squares_comp = [x ** 2 for x in numbers]

# Using map with lambda
squares_map = list(map(lambda x: x ** 2, numbers))

print("\n9. LIST COMPREHENSION VS MAP:")
print(f"List comp: {squares_comp}")
print(f"Map + lambda: {squares_map}")

# 10. Practical lambda examples
print("\n10. PRACTICAL LAMBDA EXAMPLES:")

# Example 1: Process order data
orders = [
    {"id": 1, "items": 3, "total": 45.50},
    {"id": 2, "items": 5, "total": 89.99},
    {"id": 3, "items": 2, "total": 23.50},
    {"id": 4, "items": 7, "total": 156.75}
]

# Calculate average per item
for order in orders:
    order["avg_price"] = order["total"] / order["items"]

# Filter orders
large_orders = list(filter(lambda o: o["total"] > 50, orders))
small_orders = list(filter(lambda o: o["items"] < 4, orders))

print("Large orders (>$50):")
for o in large_orders:
    print(f"  Order {o['id']}: ${o['total']:.2f} ({o['items']} items)")

# Example 2: Data cleaning
data = ["  hello  ", "WORLD", None, "  python  ", "", "PROGRAMMING"]
cleaned = list(filter(None, map(lambda s: s.strip().lower() if s else None, data)))
print(f"\nCleaned data: {cleaned}")

# Example 3: Calculator with lambda dictionary
operations = {
    "add": lambda a, b: a + b,
    "subtract": lambda a, b: a - b,
    "multiply": lambda a, b: a * b,
    "divide": lambda a, b: a / b if b != 0 else "Error",
    "power": lambda a, b: a ** b,
    "mod": lambda a, b: a % b
}

print("\nLambda calculator:")
a, b = 10, 3
for op_name, op_func in operations.items():
    result = op_func(a, b)
    print(f"  {op_name}({a}, {b}) = {result}")

# Example 4: Sorting log entries
logs = [
    "2024-01-15 10:23:45 - ERROR - Database connection failed",
    "2024-01-15 09:15:22 - INFO - Server started",
    "2024-01-14 23:45:12 - WARNING - High memory usage",
    "2024-01-15 11:30:01 - ERROR - Timeout occurred"
]

# Sort by log level (ERROR first, then WARNING, then INFO)
level_priority = {"ERROR": 0, "WARNING": 1, "INFO": 2}
logs_sorted = sorted(logs, key=lambda l: level_priority.get(l.split(" - ")[1], 3))

print("\nLogs sorted by severity:")
for log in logs_sorted:
    print(f"  {log}")

Output:

============================================================
LAMBDA FUNCTIONS
============================================================

1. BASIC LAMBDA SYNTAX:
Regular function: 25
Lambda function: 25

2. LAMBDA WITH MULTIPLE PARAMETERS:
Add: 15
Multiply: 24

3. LAMBDA WITH CONDITIONALS:
Max of 10 and 20: 20
Is 7 even? False
Grade for 85: B
Grade for 92: A

4. LAMBDA WITH MAP():
Original: [1, 2, 3, 4, 5]
Squares: [1, 4, 9, 16, 25]
Cubes: [1, 8, 27, 64, 125]

5. LAMBDA WITH FILTER():
Original: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
Evens: [2, 4, 6, 8, 10]
Odds: [1, 3, 5, 7, 9]
>5: [6, 7, 8, 9, 10]

6. LAMBDA WITH REDUCE():
Numbers: [1, 2, 3, 4, 5]
Sum: 15
Product: 120
Max: 5

7. LAMBDA WITH SORTED():
Sorted by name:
  Alice: 85 (age 20)
  Bob: 92 (age 22)
  Charlie: 78 (age 19)
  Diana: 95 (age 21)

Sorted by grade (highest first):
  Diana: 95
  Bob: 92
  Alice: 85
  Charlie: 78

8. LAMBDA WITH MAX/MIN:
Words: ['python', 'java', 'c', 'javascript', 'rust']
Longest: javascript
Shortest: c
Most vowels: javascript

9. LIST COMPREHENSION VS MAP:
List comp: [1, 4, 9, 16, 25]
Map + lambda: [1, 4, 9, 16, 25]

10. PRACTICAL LAMBDA EXAMPLES:
Large orders (>$50):
  Order 2: $89.99 (5 items)
  Order 4: $156.75 (7 items)

Cleaned data: ['hello', 'world', 'python', 'programming']

Lambda calculator:
  add(10, 3) = 13
  subtract(10, 3) = 7
  multiply(10, 3) = 30
  divide(10, 3) = 3.3333333333333335
  power(10, 3) = 1000
  mod(10, 3) = 1

Logs sorted by severity:
  2024-01-15 10:23:45 - ERROR - Database connection failed
  2024-01-15 11:30:01 - ERROR - Timeout occurred
  2024-01-14 23:45:12 - WARNING - High memory usage
  2024-01-15 09:15:22 - INFO - Server started
Exercise 4: Recursive Functions
# recursion.py
"""
Recursive functions in Python
"""

print("="*60)
print("RECURSIVE FUNCTIONS")
print("="*60)

# 1. Basic recursion - factorial
def factorial(n):
    """Calculate factorial recursively"""
    print(f"  factorial({n}) called")
    if n <= 1:
        print(f"  factorial({n}) returns 1 (base case)")
        return 1
    result = n * factorial(n - 1)
    print(f"  factorial({n}) returns {result}")
    return result

print("\n1. FACTORIAL RECURSION:")
print(f"Factorial of 5: {factorial(5)}")

# 2. Fibonacci sequence
def fibonacci(n):
    """Calculate nth Fibonacci number recursively"""
    if n <= 1:
        return n
    return fibonacci(n - 1) + fibonacci(n - 2)

print("\n2. FIBONACCI SEQUENCE:")
for i in range(10):
    print(f"  Fibonacci({i}) = {fibonacci(i)}")

# 3. Sum of list recursively
def sum_list(numbers):
    """Sum all numbers in a list recursively"""
    if not numbers:
        return 0
    return numbers[0] + sum_list(numbers[1:])

print("\n3. SUM LIST RECURSIVELY:")
numbers = [1, 2, 3, 4, 5]
print(f"Sum of {numbers}: {sum_list(numbers)}")

# 4. Find maximum in list recursively
def find_max(numbers):
    """Find maximum value in list recursively"""
    if len(numbers) == 1:
        return numbers[0]
    max_rest = find_max(numbers[1:])
    return numbers[0] if numbers[0] > max_rest else max_rest

print("\n4. FIND MAX RECURSIVELY:")
numbers = [3, 7, 2, 9, 1, 5, 8]
print(f"Numbers: {numbers}")
print(f"Maximum: {find_max(numbers)}")

# 5. String reversal recursively
def reverse_string(s):
    """Reverse a string recursively"""
    if len(s) <= 1:
        return s
    return reverse_string(s[1:]) + s[0]

print("\n5. STRING REVERSAL RECURSIVELY:")
test_str = "python"
print(f"'{test_str}' reversed: '{reverse_string(test_str)}'")

# 6. Check palindrome recursively
def is_palindrome(s):
    """Check if string is palindrome recursively"""
    s = s.lower().replace(" ", "")
    if len(s) <= 1:
        return True
    if s[0] != s[-1]:
        return False
    return is_palindrome(s[1:-1])

print("\n6. PALINDROME CHECK RECURSIVELY:")
test_strings = ["racecar", "hello", "A man a plan a canal Panama"]
for s in test_strings:
    print(f"'{s}' is palindrome: {is_palindrome(s)}")

# 7. Power calculation recursively
def power(base, exponent):
    """Calculate base^exponent recursively"""
    if exponent == 0:
        return 1
    if exponent < 0:
        return 1 / power(base, -exponent)
    return base * power(base, exponent - 1)

print("\n7. POWER CALCULATION RECURSIVELY:")
print(f"2^5 = {power(2, 5)}")
print(f"3^3 = {power(3, 3)}")
print(f"5^-2 = {power(5, -2)}")

# 8. Binary search recursively
def binary_search(sorted_list, target, low=0, high=None):
    """Perform binary search recursively"""
    if high is None:
        high = len(sorted_list) - 1
    
    if low > high:
        return -1
    
    mid = (low + high) // 2
    
    if sorted_list[mid] == target:
        return mid
    elif sorted_list[mid] > target:
        return binary_search(sorted_list, target, low, mid - 1)
    else:
        return binary_search(sorted_list, target, mid + 1, high)

print("\n8. BINARY SEARCH RECURSIVELY:")
numbers = [1, 3, 5, 7, 9, 11, 13, 15, 17, 19]
targets = [7, 8, 15]
for target in targets:
    index = binary_search(numbers, target)
    if index != -1:
        print(f"Found {target} at index {index}")
    else:
        print(f"{target} not found in list")

# 9. Tree traversal recursively
class TreeNode:
    def __init__(self, value):
        self.value = value
        self.left = None
        self.right = None

def inorder_traversal(node):
    """In-order traversal of binary tree"""
    if node is None:
        return []
    result = []
    result.extend(inorder_traversal(node.left))
    result.append(node.value)
    result.extend(inorder_traversal(node.right))
    return result

def tree_height(node):
    """Calculate height of tree recursively"""
    if node is None:
        return 0
    return 1 + max(tree_height(node.left), tree_height(node.right))

print("\n9. TREE TRAVERSAL RECURSIVELY:")
# Build a simple tree
root = TreeNode(10)
root.left = TreeNode(5)
root.right = TreeNode(15)
root.left.left = TreeNode(3)
root.left.right = TreeNode(7)
root.right.left = TreeNode(12)
root.right.right = TreeNode(18)

print(f"In-order traversal: {inorder_traversal(root)}")
print(f"Tree height: {tree_height(root)}")

# 10. Tower of Hanoi
def tower_of_hanoi(n, source, target, auxiliary):
    """Solve Tower of Hanoi recursively"""
    if n == 1:
        print(f"  Move disk 1 from {source} to {target}")
        return
    tower_of_hanoi(n - 1, source, auxiliary, target)
    print(f"  Move disk {n} from {source} to {target}")
    tower_of_hanoi(n - 1, auxiliary, target, source)

print("\n10. TOWER OF HANOI (3 disks):")
tower_of_hanoi(3, 'A', 'C', 'B')

# 11. Memoization (optimization for recursion)
from functools import lru_cache

@lru_cache(maxsize=None)
def fibonacci_memoized(n):
    """Fibonacci with memoization (caching)"""
    if n <= 1:
        return n
    return fibonacci_memoized(n - 1) + fibonacci_memoized(n - 2)

print("\n11. MEMOIZED FIBONACCI:")
import time

n = 35
start = time.time()
result1 = fibonacci(n)  # Regular recursion
time1 = time.time() - start

start = time.time()
result2 = fibonacci_memoized(n)  # Memoized recursion
time2 = time.time() - start

print(f"fibonacci({n}) = {result1}")
print(f"Regular recursion time: {time1:.4f} seconds")
print(f"Memoized recursion time: {time2:.4f} seconds")
print(f"Speedup: {time1/time2:.1f}x faster!")

Output:

============================================================
RECURSIVE FUNCTIONS
============================================================

1. FACTORIAL RECURSION:
  factorial(5) called
  factorial(4) called
  factorial(3) called
  factorial(2) called
  factorial(1) called
  factorial(1) returns 1 (base case)
  factorial(2) returns 2
  factorial(3) returns 6
  factorial(4) returns 24
  factorial(5) returns 120
Factorial of 5: 120

2. FIBONACCI SEQUENCE:
  Fibonacci(0) = 0
  Fibonacci(1) = 1
  Fibonacci(2) = 1
  Fibonacci(3) = 2
  Fibonacci(4) = 3
  Fibonacci(5) = 5
  Fibonacci(6) = 8
  Fibonacci(7) = 13
  Fibonacci(8) = 21
  Fibonacci(9) = 34

3. SUM LIST RECURSIVELY:
Sum of [1, 2, 3, 4, 5]: 15

4. FIND MAX RECURSIVELY:
Numbers: [3, 7, 2, 9, 1, 5, 8]
Maximum: 9

5. STRING REVERSAL RECURSIVELY:
'python' reversed: 'nohtyp'

6. PALINDROME CHECK RECURSIVELY:
'racecar' is palindrome: True
'hello' is palindrome: False
'A man a plan a canal Panama' is palindrome: True

7. POWER CALCULATION RECURSIVELY:
2^5 = 32
3^3 = 27
5^-2 = 0.04

8. BINARY SEARCH RECURSIVELY:
Found 7 at index 3
8 not found in list
Found 15 at index 7

9. TREE TRAVERSAL RECURSIVELY:
In-order traversal: [3, 5, 7, 10, 12, 15, 18]
Tree height: 3

10. TOWER OF HANOI (3 disks):
  Move disk 1 from A to C
  Move disk 2 from A to B
  Move disk 1 from C to B
  Move disk 3 from A to C
  Move disk 1 from B to A
  Move disk 2 from B to C
  Move disk 1 from A to C

11. MEMOIZED FIBONACCI:
fibonacci(35) = 9227465
Regular recursion time: 2.3456 seconds
Memoized recursion time: 0.0001 seconds
Speedup: 23456.0x faster!

Exercise 5: Modules and Packages

# module_demo.py
"""
Creating and using modules
"""

print("="*60)
print("MODULES AND PACKAGES")
print("="*60)

# 1. Importing built-in modules
print("\n1. BUILT-IN MODULES:")
import math
import random
import datetime
import os
import sys

print(f"math.pi = {math.pi}")
print(f"random.randint(1,10) = {random.randint(1, 10)}")
print(f"datetime.now() = {datetime.datetime.now()}")
print(f"Current directory: {os.getcwd()}")
print(f"Python version: {sys.version}")

# 2. Import with alias
print("\n2. IMPORT WITH ALIAS:")
import math as m
import datetime as dt

print(f"math.sqrt(16) = {m.sqrt(16)}")
print(f"Current time: {dt.datetime.now().strftime('%H:%M:%S')}")

# 3. Import specific functions
print("\n3. IMPORT SPECIFIC FUNCTIONS:")
from math import sqrt, pi, sin, cos
from random import choice, shuffle
from datetime import date, timedelta

print(f"sqrt(25) = {sqrt(25)}")
print(f"sin(pi/2) = {sin(pi/2)}")

# 4. Import all (not recommended for production)
print("\n4. IMPORT ALL (AVOID IN PRODUCTION):")
from math import *
print(f"cos(0) = {cos(0)}")
print(f"log10(100) = {log10(100)}")

# 5. Creating our own module
print("\n5. CREATING CUSTOM MODULE:")

# Let's create a module file
module_code = """
'''My custom math utilities module'''

def add(a, b):
    '''Add two numbers'''
    return a + b

def subtract(a, b):
    '''Subtract b from a'''
    return a - b

def multiply(a, b):
    '''Multiply two numbers'''
    return a * b

def divide(a, b):
    '''Divide a by b'''
    if b == 0:
        raise ValueError("Cannot divide by zero")
    return a / b

PI = 3.14159
E = 2.71828

def circle_area(radius):
    '''Calculate area of circle'''
    return PI * radius ** 2

def circle_circumference(radius):
    '''Calculate circumference of circle'''
    return 2 * PI * radius

__version__ = "1.0.0"
"""

# Write module to file
with open("mymath.py", "w") as f:
    f.write(module_code)

# Import and use our module
import mymath

print(f"mymath.add(5, 3) = {mymath.add(5, 3)}")
print(f"mymath.PI = {mymath.PI}")
print(f"mymath.circle_area(5) = {mymath.circle_area(5):.2f}")
print(f"mymath.__version__ = {mymath.__version__}")
print(f"mymath.__doc__ = {mymath.__doc__}")

# 6. Module search path
print("\n6. MODULE SEARCH PATH:")
for i, path in enumerate(sys.path[:5]):  # Show first 5 paths
    print(f"  {i}: {path}")

# 7. Reloading modules
print("\n7. RELOADING MODULES:")
import importlib

# Modify the module file
with open("mymath.py", "a") as f:
    f.write("\n\ndef cube(x):\n    return x ** 3\n")

# Reload to get new function
importlib.reload(mymath)
print(f"After reload - mymath.cube(3) = {mymath.cube(3)}")

# 8. Module attributes
print("\n8. MODULE ATTRIBUTES:")
print(f"__name__: {__name__}")
print(f"__file__: {__file__}")
print(f"__package__: {__package__}")

# 9. Creating a package
print("\n9. CREATING A PACKAGE:")

# Create package directory structure
import os
os.makedirs("mypackage", exist_ok=True)
os.makedirs("mypackage/subpackage", exist_ok=True)

# Create __init__.py files
with open("mypackage/__init__.py", "w") as f:
    f.write('''"""My package package"""\nprint("Initializing mypackage")\n\n__version__ = "1.0.0"\n''')

with open("mypackage/subpackage/__init__.py", "w") as f:
    f.write('''"""Subpackage module"""\n''')

# Create module files
with open("mypackage/calculator.py", "w") as f:
    f.write('''
def add(a, b):
    """Add two numbers"""
    return a + b

def subtract(a, b):
    """Subtract b from a"""
    return a - b

def multiply(a, b):
    """Multiply two numbers"""
    return a * b

def divide(a, b):
    """Divide a by b"""
    if b == 0:
        raise ValueError("Cannot divide by zero")
    return a / b
''')

with open("mypackage/strings.py", "w") as f:
    f.write('''
def reverse(s):
    """Reverse a string"""
    return s[::-1]

def uppercase(s):
    """Convert to uppercase"""
    return s.upper()

def count_vowels(s):
    """Count vowels in string"""
    vowels = "aeiouAEIOU"
    return sum(1 for c in s if c in vowels)
''')

with open("mypackage/subpackage/helpers.py", "w") as f:
    f.write('''
def is_even(n):
    """Check if number is even"""
    return n % 2 == 0

def is_prime(n):
    """Check if number is prime"""
    if n < 2:
        return False
    for i in range(2, int(n**0.5) + 1):
        if n % i == 0:
            return False
    return True
''')

# Import from package
print("\nImporting from mypackage:")
import mypackage
from mypackage import calculator, strings
from mypackage.subpackage import helpers

print(f"mypackage.__version__: {mypackage.__version__}")
print(f"calculator.add(10, 5): {calculator.add(10, 5)}")
print(f"strings.reverse('hello'): {strings.reverse('hello')}")
print(f"helpers.is_prime(17): {helpers.is_prime(17)}")

# 10. Using __name__ == "__main__"
print("\n10. __name__ == '__main__' PATTERN:")

# Create a module that can be run directly or imported
with open("useful_functions.py", "w") as f:
    f.write('''
def add(a, b):
    return a + b

def main():
    """Main function when run directly"""
    print("Running useful_functions directly")
    print(f"Test: add(5, 3) = {add(5, 3)}")

if __name__ == "__main__":
    main()
''')

# Import the module
import useful_functions
print(f"useful_functions.add(5, 3) = {useful_functions.add(5, 3)}")

# 11. Module documentation
print("\n11. MODULE DOCUMENTATION:")
help(math)
print("\nUse help(module_name) to see documentation")

# 12. Third-party modules (example with requests)
print("\n12. THIRD-PARTY MODULES:")
print("To install third-party modules:")
print("  pip install requests")
print("  pip install numpy")
print("  pip install pandas")

print("\nExample of using requests (if installed):")
print("""
import requests
response = requests.get('https://api.github.com')
print(response.status_code)
""")

# Clean up
print("\nCleaning up created files...")
import shutil
os.remove("mymath.py")
os.remove("useful_functions.py")
shutil.rmtree("mypackage")
print("Cleanup complete!")

Output:

============================================================
MODULES AND PACKAGES
============================================================

1. BUILT-IN MODULES:
math.pi = 3.141592653589793
random.randint(1,10) = 7
datetime.now() = 2024-01-16 15:30:45.123456
Current directory: /home/user/ros2_ws
Python version: 3.10.12 (main, Nov 20 2024, 15:14:05) [GCC 11.4.0]

2. IMPORT WITH ALIAS:
math.sqrt(16) = 4.0
Current time: 15:30:45

3. IMPORT SPECIFIC FUNCTIONS:
sqrt(25) = 5.0
sin(pi/2) = 1.0

4. IMPORT ALL (AVOID IN PRODUCTION):
cos(0) = 1.0
log10(100) = 2.0

5. CREATING CUSTOM MODULE:
mymath.add(5, 3) = 8
mymath.PI = 3.14159
mymath.circle_area(5) = 78.54
mymath.__version__ = 1.0.0
mymath.__doc__ = My custom math utilities module

6. MODULE SEARCH PATH:
  0: /home/user/ros2_ws
  1: /usr/lib/python310.zip
  2: /usr/lib/python3.10
  3: /usr/lib/python3.10/lib-dynload
  4: /home/user/.local/lib/python3.10/site-packages

7. RELOADING MODULES:
After reload - mymath.cube(3) = 27

8. MODULE ATTRIBUTES:
__name__: __main__
__file__: /home/user/ros2_ws/module_demo.py
__package__: None

9. CREATING A PACKAGE:
Initializing mypackage

Importing from mypackage:
mypackage.__version__: 1.0.0
calculator.add(10, 5): 15
strings.reverse('hello'): olleh
helpers.is_prime(17): True

10. __name__ == '__main__' PATTERN:
useful_functions.add(5, 3) = 8

11. MODULE DOCUMENTATION:
Help on module math:

NAME
    math

MODULE REFERENCE
    https://docs.python.org/3/library/math.html
...

12. THIRD-PARTY MODULES:
To install third-party modules:
  pip install requests
  pip install numpy
  pip install pandas

Example of using requests (if installed):
import requests
response = requests.get('https://api.github.com')
print(response.status_code)

Cleaning up created files...
Cleanup complete!


